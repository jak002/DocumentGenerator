@using RazorLight

<!DOCTYPE html>
<html>
<head>
    <style>
        * {font-family: Arial, Helvetica, sans-serif;}
        .spread {display:flex; justify-content:space-between;}
        table {border-collapse: collapse;}
        td {border: 1px solid; text-align:end; padding: 0.3rem;}
        th {padding-inline: 0.5rem;}
    </style>
</head>
<body>
    <header class="spread">
        <div>
            <p>Logo <h1>Firma A/S</h1></p>
        </div>
        <p>@Model.date</p>
    </header>
    <hr>
    <p>Kære Jacob Sejer Kristoffersen</p>
    <p>Dette er din faktura for November 2025. Nedenfor kan du se hvordan service prisen er beregnet.</p>
    <br>
    <table>
        <thead>
            <tr>
                <th>Service navn</th>
                <th>Antal timer</th>
                <th>Pris per time</th>
                <th>Totalpris per service</th>
            </tr>
        </thead>
        <tbody>
            @{int total = 0;}
            @foreach (var entry in Model.bills)
            {
                total += (entry["price"] * entry["hours"]);
                <tr>
                    <td>@entry["name"]</td>
                    <td>@entry["hours"]</td>
                    <td>@entry["price"].ToString("C", System.Globalization.CultureInfo.CreateSpecificCulture("da-DK"))</td>
                    <td>@((entry["price"] * entry["hours"]).ToString("C", System.Globalization.CultureInfo.CreateSpecificCulture("da-DK")))</td>
                </tr>
            }
        </tbody>
    </table>
    <br>
    <table>
        @{
            string tax = (total * 0.25).ToString("C", System.Globalization.CultureInfo.CreateSpecificCulture("da-DK"));
            string totalformatted = total.ToString("C", System.Globalization.CultureInfo.CreateSpecificCulture("da-DK"));
        }
        <tr>
            <td>Subtotal:</td>
            <td>@totalformatted</td>
        </tr>
        <tr>
            <td>Heraf moms:</td>

            <td>@tax</td>
        </tr>
        <tr>
            <td>I alt:</td>
            <td>@totalformatted</td>
        </tr>
    </table>
    <br>
    <p>Dette beløb betales senest @Model.paymentDue.</p>
    @if(Model.paidAutomatically)
    {
        <p>Dette beløb er automatisk blevet betalt.</p>
    }
        <br>
        <p>Med venlig hilsen</p>
        <p>Firma A/S</p>
        <hr>
        <footer class="spread">
            <h2>Firma A/S</h2>
            <div>
            <p>Addressevej 27h</p>
            <p>2000 Frederiksberg</p>
            </div>
        </footer>
    </body>
</html>